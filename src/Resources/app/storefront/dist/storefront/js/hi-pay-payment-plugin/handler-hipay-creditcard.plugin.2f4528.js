"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["handler-hipay-creditcard.plugin"],{41:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var r=i(560);class s extends r.Z{init(){var e;super.init();let t=document.querySelector("#".concat(this.options.idResponse)),i=this._cardInstance;(e=document.querySelector("#hipay-multiuse"))===null||void 0===e||e.addEventListener("change",function(e){i.setMultiUse(e.target.checked)}),document.querySelectorAll('input[name="hipay-token"]').forEach(e=>e.addEventListener("change",function(e){var r="",s="block";e.target.getAttribute("value")&&(s="none",r={token:e.target.value,device_fingerprint:i.sdkInstance.getDeviceFingerprint(),browser_info:i.sdkInstance.getBrowserInfo(),payment_product:e.target.dataset.brand}),t.setAttribute("value",JSON.stringify(r)),document.querySelector("#hipay-new-creditcard-block").style.display=s}))}getPaymentDefaultOption(){return{idCardHolder:"hipay-card-holder",idCardNumber:"hipay-card-number",idExpiryDate:"hipay-expiry-date",idCvc:"hipay-cvc",firstnameValue:"",lastnameValue:""}}getPaymentName(){return"card"}getConfigHostedFields(){let e={fields:{cardHolder:{selector:this.options.idCardHolder,defaultFirstname:this.options.firstnameValue,defaultLastname:this.options.lastnameValue},cardNumber:{selector:this.options.idCardNumber},expiryDate:{selector:this.options.idExpiryDate},cvc:{selector:this.options.idCvc,helpButton:this.options.cvcHelp}}};return this.options.styles&&(e.styles=this.options.styles),e}}},560:(e,t,i)=>{i.d(t,{Z:()=>r});class r extends window.PluginBaseClass{init(){if(this.constructor===r)throw TypeError('Class "HipayHostedFieldsPlugin" cannot be instantiated directly');this.options={...this.getPaymentDefaultOption(),...this.options},this._configHostedFields=this.getConfigHostedFields(),this._form=document.querySelector("#"+this.options.idResponse).form,this._cardInstance=new HiPay(this.options).create(this.getPaymentName(),this._configHostedFields),this._registerEvents()}_registerEvents(){this._cardInstance.on("ready",()=>{this._cardInstance.on("inputChange",this._inputErrorHandler.bind(this)),this._cardInstance.on("blur",this._inputErrorHandler.bind(this));let e=document.querySelector("#"+this.options.idResponse),t=!1;this._cardInstance.on("change",i=>{(t=i.valid)?this._cardInstance.getPaymentData().then(t=>{e.setAttribute("value",JSON.stringify(t))}):e.setAttribute("value","")}),e.addEventListener("invalid",i=>{t||this._cardInstance.getPaymentData().then(()=>{},t=>{e.setAttribute("value",""),t.forEach(e=>this._errorHandler(e.field,!0,e.error))})}),this._form.addEventListener("submit",t=>{t.preventDefault();let i=t.currentTarget;this._cardInstance.getPaymentData().then(t=>{e.setAttribute("value",JSON.stringify(t)),i.submit()})})})}_inputErrorHandler(e){this._errorHandler(e.element,!e.validity.valid,e.validity.error)}_errorHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this._configHostedFields.fields[e].selector,s=document.querySelector("#"+r);t?s.classList.add(this.options.errorClass):s.classList.remove(this.options.errorClass);let n=document.querySelector("#".concat(this.options.errorPrefix,"-").concat(r));n&&(n.innerHTML=i)}getPaymentName(){throw Error('Method "getPaymentName" must be implemented')}getConfigHostedFields(){throw Error('Method "getConfigHostedFields" must be implemented')}}r.options={username:null,password:null,environment:null,lang:null,idResponse:"hipay-response",cvcHelp:!1,errorClass:"is-invalid",errorPrefix:"error",styles:null}}}]);