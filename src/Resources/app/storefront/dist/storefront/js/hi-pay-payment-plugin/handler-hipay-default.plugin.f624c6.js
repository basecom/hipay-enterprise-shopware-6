"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["handler-hipay-default.plugin"],{575:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(560);class i extends n.Z{getPaymentDefaultOption(){return{}}getPaymentName(){return this.options.paymentProductName}getConfigHostedFields(){let e={template:"auto",selector:"default-selector"};return this.options.styles&&(e.styles=this.options.styles),e}}i.options={username:null,password:null,environment:null,lang:null,styles:null,idResponse:"hipay-response"}},560:(e,t,s)=>{s.d(t,{Z:()=>n});class n extends window.PluginBaseClass{init(){if(this.constructor===n)throw TypeError('Class "HipayHostedFieldsPlugin" cannot be instantiated directly');this.options={...this.getPaymentDefaultOption(),...this.options},this._configHostedFields=this.getConfigHostedFields(),this._form=document.querySelector("#"+this.options.idResponse).form,this._cardInstance=new HiPay(this.options).create(this.getPaymentName(),this._configHostedFields),this._registerEvents()}_registerEvents(){this._cardInstance.on("ready",()=>{this._cardInstance.on("inputChange",this._inputErrorHandler.bind(this)),this._cardInstance.on("blur",this._inputErrorHandler.bind(this));let e=document.querySelector("#"+this.options.idResponse),t=!1;this._cardInstance.on("change",s=>{(t=s.valid)?this._cardInstance.getPaymentData().then(t=>{e.setAttribute("value",JSON.stringify(t))}):e.setAttribute("value","")}),e.addEventListener("invalid",s=>{t||this._cardInstance.getPaymentData().then(()=>{},t=>{e.setAttribute("value",""),t.forEach(e=>this._errorHandler(e.field,!0,e.error))})}),this._form.addEventListener("submit",t=>{t.preventDefault();let s=t.currentTarget;this._cardInstance.getPaymentData().then(t=>{e.setAttribute("value",JSON.stringify(t)),s.submit()})})})}_inputErrorHandler(e){this._errorHandler(e.element,!e.validity.valid,e.validity.error)}_errorHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this._configHostedFields.fields[e].selector,i=document.querySelector("#"+n);t?i.classList.add(this.options.errorClass):i.classList.remove(this.options.errorClass);let r=document.querySelector("#".concat(this.options.errorPrefix,"-").concat(n));r&&(r.innerHTML=s)}getPaymentName(){throw Error('Method "getPaymentName" must be implemented')}getConfigHostedFields(){throw Error('Method "getConfigHostedFields" must be implemented')}}n.options={username:null,password:null,environment:null,lang:null,idResponse:"hipay-response",cvcHelp:!1,errorClass:"is-invalid",errorPrefix:"error",styles:null}}}]);